!function(o){o.factory("CKolorFactory",function(){var o={alpha:100,ckoloring:!1,defaultColor:"#FFFFFF",display:"hex",inputHsl:{h:null,s:null,l:null},hex:null,hsl:{h:null,s:null,l:null},hues:[75,85,95,105,115,125,135,145,155,165,175,185,195,205,215,225,235,245,255,265,275,285,295,305,315,325,335,345,355,5,15,25,35,45,55,65],model:null,modelId:null,originalFormat:null,previousColors:[],rgb:{r:null,g:null,b:null},circleWidth:0,init:function(l){o.alpha=100,o.defaultColor=l.defaultColor?o.validHex(l.defaultColor):"#FFFFFF",o.model=l.model,o.modelId=l.modelId;var r=angular.fromJson(localStorage.aCKolorPreviousColors);r&&(o.previousColors=r);var e=o.convertTo();e&&(o.hsl.h=o.inputHsl.h=e.h,o.hsl.s=o.inputHsl.s=e.s,o.hsl.l=o.inputHsl.l=e.l,o.rgb=o.hslToRgb(e),o.hex=o.rgbToHex(o.rgb),o.display=o.originalFormat)},save:function(){if(100===o.alpha)switch(o.originalFormat){case"hex":o.model=o.hex;break;case"hsl":o.model="hsl("+o.hsl.h+","+o.hsl.s+"%,"+o.hsl.l+"%)";break;case"rgb":o.model="rgb("+o.rgb.r+","+o.rgb.g+","+o.rgb.b+")"}else"hsl"===o.originalFormat?o.model="hsla("+o.hsl.h+","+o.hsl.s+"%,"+o.hsl.l+"%,"+o.alpha/100+")":o.model="rgba("+o.rgb.r+","+o.rgb.g+","+o.rgb.b+","+o.alpha/100+")";o.previousColors.indexOf(o.model)===-1&&(o.previousColors.unshift(o.model),o.previousColors.length>20&&(o.previousColors.length=20),localStorage.aCKolorPreviousColors=angular.toJson(o.previousColors)),o.toggleCKoloring()},previousColorClick:function(l){var r=(o.originalFormat,o.convertTo(l));r&&(o.hsl.h=o.inputHsl.h=r.h,o.hsl.s=o.inputHsl.s=r.s,o.hsl.l=o.inputHsl.l=r.l,o.rgb=o.hslToRgb(r),o.hex=o.rgbToHex(o.rgb),o.display=o.originalFormat),o.updateHSL()},toggleCKoloring:function(){o.ckoloring=!1},updateColorDisplay:function(l){return o.display=l,o.display},updateHSL:function(){o.hex=o.rgbToHex(o.hslToRgb(o.hsl)),o.rgb=o.hslToRgb(o.hsl),o.inputHsl=o.hsl},updateRGB:function(){o.hex=o.rgbToHex(o.rgb),o.hsl=o.rgbToHsl(o.rgb)},updateHEX:function(){o.hex=o.validHex(o.hex);var l=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o.hex);o.hex&&7===o.hex.length&&l&&(o.rgb=o.hexToRgb(o.hex),o.hsl=o.rgbToHsl(o.rgb))},validHex:function(o){var l=o.split("");return"#"===l[0]&&l.shift(),3===l.length&&(l=l.concat(l)),o="#"+l.join("")},hueLightFromRadial:function(l,r){var e=r.getBoundingClientRect(),a=e.width/2,t=e.left,n=e.top,i=a+t,s=a+n,c=l.pageX-i,u=l.pageY-s,d=Math.atan2(u,c)*(180/Math.PI),h=d;h<0&&(h+=360);var p=Math.abs(c),g=Math.abs(u),v=Math.round(100-100*Math.sqrt(p*p+g*g)/a);return o.hsl.l=v>-1?v<101?v:100:0,o.hsl.h=Math.round(h)>-1||Math.round(h)<360?Math.round(h):0,o.updateHSL(),o.radialXY(),{h:o.hsl.h,l:o.hsl.l}},radialXY:function(){var l=o.circleWidth/2,r=l*((100-o.hsl.l)/100),e=o.hsl.h,a=l+r*Math.cos(e*Math.PI/180),t=2*l-(l+-(r*Math.sin(e*Math.PI/180)));return{x:a,y:t}},convertTo:function(l){l=l?l:o.model?o.model:"null";var r;return l.indexOf("#")>-1?(l=o.validHex(l),r=o.hexToRgb(l),o.originalFormat="hex",o.rgbToHsl(r)):l.indexOf("hsla")>-1?(l=l.split("(")[1],l=l.substring(0,l.length-1),l=l.split(","),o.originalFormat="hsl",o.alpha=100*l[3],{h:parseInt(l[0]),s:parseInt(l[1]),l:parseInt(l[2])}):l.indexOf("hsl")>-1?(l=l.split("(")[1],l=l.substring(0,l.length-1),l=l.split(","),o.originalFormat="hsl",{h:parseInt(l[0]),s:parseInt(l[1]),l:parseInt(l[2])}):l.indexOf("rgba")>-1?(l=l.split("(")[1],l=l.substring(0,l.length-1),l=l.split(","),o.originalFormat="rgb",o.alpha=100*l[3],o.rgbToHsl({r:parseInt(l[0]),g:parseInt(l[1]),b:parseInt(l[2])})):l.indexOf("rgb")>-1?(l=l.split("(")[1],l=l.substring(0,l.length-1),l=l.split(","),o.originalFormat="rgb",o.rgbToHsl({r:parseInt(l[0]),g:parseInt(l[1]),b:parseInt(l[2])})):l.indexOf("transparent")>-1?(o.originalFormat="rgb",o.alpha=0,r=o.hexToRgb(o.defaultColor),o.rgbToHsl(r)):(o.originalFormat="rgb",r=o.hexToRgb(o.defaultColor),o.rgbToHsl(r))},hexToRgb:function(o){var l=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);return l?{r:parseInt(l[1],16),g:parseInt(l[2],16),b:parseInt(l[3],16)}:null},rgbToHsl:function(l){var r,e,a=l.r/255,t=l.g/255,n=l.b/255,i=Math.max(a,t,n),s=Math.min(a,t,n),c=(i+s)/2;if(i==s)r=e=0;else{var u=i-s;switch(e=c>.5?u/(2-i-s):u/(i+s),i){case a:r=(t-n)/u+(t<n?6:0);break;case t:r=(n-a)/u+2;break;case n:r=(a-t)/u+4}r/=6}return(0===r||isNaN(r))&&(r=o.hsl.h),{h:Math.round(360*r*100)/100,s:Math.round(100*e*100)/100,l:Math.round(100*c*100)/100}},hslToRgb:function(o){var l,r,e,a,t,n,i=o.h,s=o.s,c=o.l;return isFinite(i)||(i=0),isFinite(s)||(s=0),isFinite(c)||(c=0),i/=60,i<0&&(i=6- -i%6),i%=6,s=Math.max(0,Math.min(1,s/100)),c=Math.max(0,Math.min(1,c/100)),t=(1-Math.abs(2*c-1))*s,n=t*(1-Math.abs(i%2-1)),i<1?(l=t,r=n,e=0):i<2?(l=n,r=t,e=0):i<3?(l=0,r=t,e=n):i<4?(l=0,r=n,e=t):i<5?(l=n,r=0,e=t):(l=t,r=0,e=n),a=c-t/2,l=Math.round(255*(l+a)),r=Math.round(255*(r+a)),e=Math.round(255*(e+a)),{r:l,g:r,b:e}},intToHex:function(o){var l=parseInt(o).toString(16);return l.length<2?"0"+l:l},rgbToHex:function(l){return"#"+o.intToHex(l.r)+o.intToHex(l.g)+o.intToHex(l.b)}};return o})}(angular.module("aCKolor",[])),function(o){"use strict";o.directive("aCkolorHexInput",function(){return{restrict:"A",require:"ngModel",link:function(o,l,r,e){function a(o){var l=o.split("");return"#"===l[0]&&l.shift(),3===l.length&&(l=l.concat(l)),o="#"+l.join("")}e.$parsers.push(a)}}})}(angular.module("aCKolor")),function(o){o.directive("aCkolor",["$document","CKolorFactory","$compile","$timeout",function(o,l,r,e){return{restrict:"E",scope:{elementId:"=",inputId:"=",model:"=",name:"=",type:"=",defaultColor:"=",blur:"="},template:'<div class=c-ckolor__wrapper id="{{ elementId }}"><div class=c-ckolor__input-wrapper is-ckoloring="{{ CKolorFactory.ckoloring }}" ng-click=toggleCKoloring()><input ng-if="type && model" type="{{ type }}" name="{{ name }}" id="{{ inputId }}" ng-model=model> <span ng-style="{\'background-color\':model}" class=c-ckolor__swatch></span> <span ng-bind=model></span></div></div>',link:function(a,t){function n(){a.blur!==!0&&void 0!==a.blur||u.removeClass("c-ckolor__overlay-blur")}function i(){d&&d.offsetWidth?l.circleWidth=d.offsetWidth:e(function(){i()},200)}var s=function(){for(var o="",l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<35;r++)o+=l.charAt(Math.floor(Math.random()*l.length));return o},c=o[0].body,u=angular.element(c),d=c.querySelector(".c-ckolor__wheel"),h=s();a.CKolorFactory=l,a.type||(a.type="hidden"),a.toggleCKoloring=function(){var o=c.querySelector("a-ckolor-wheel");if(!o){var e="<a-ckolor-wheel></a-ckolor-wheel>",t=r(e)(a);u.append(t),d=c.querySelector(".c-ckolor__wheel")}a.blur!==!0&&void 0!==a.blur||u.addClass("c-ckolor__overlay-blur"),l.init({model:a.model,modelId:h,defaultColor:a.defaultColor}),l.ckoloring=!0,i()},a.$watch(function(){return l.model},function(o,r){if(o!==r&&l.modelId===h&&o!==a.model){n();var e,t,i;switch(l.originalFormat){case"hex":e=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(l.model),e&&(a.model=l.model);break;case"rgb":try{for(t=l.model.split("(")[1].split(")")[0].split(","),e=!0,i=0;i<t.length;i++)t[i]=parseInt(t[i]),(isNaN(t[i])||t[i]>255||t[i]<0)&&(e=!1);e&&(a.model=l.model)}catch(o){}break;case"hsl":try{for(t=l.model.split("(")[1].split(")")[0].split(","),e=!0,i=0;i<t.length;i++)t[i]=parseInt(t[i]),0===i?(isNaN(t[i])||t[i]>360||t[i]<0)&&(e=!1):(isNaN(t[i])||t[i]>100||t[i]<0)&&(e=!1);e&&(a.model=l.model)}catch(o){}}}}),a.$watch(function(){return l.ckoloring},function(o,r){l.ckoloring===!1&&l.modelId===h&&n()})}}}])}(angular.module("aCKolor")),function(o){o.directive("aCkolorWheel",["$timeout","$document","CKolorFactory","$window",function(o,l,r,e){return{restrict:"E",template:"<div class=c-ckolor__overlay ng-show=CKolorFactory.ckoloring><div class=c-ckolor__overlay-inner-outer><div class=c-ckolor__overlay-inner><div class=c-ckolor__wheel><div class=c-ckolor__wheel-colors><div ng-repeat=\"hue in CKolorFactory.hues track by $index\" class=c-ckolor__wheel-color><div class=c-ckolor__wheel-color-inner1><div class=c-ckolor__wheel-color-inner2 ng-style=\"{'background-color':'hsl(' + hue + ',' + CKolorFactory.hsl.s + '%,50%)'}\"></div></div></div></div><div class=c-ckolor__wheel-value ng-click=updateHueLightFromRadial($event)><span class=c-ckolor__wheel-scoop ng-style=\"{left: CKolorFactory.radialXY().x + 'px', top: CKolorFactory.radialXY().y + 'px', background: 'hsl(' + CKolorFactory.hsl.h + ',' + CKolorFactory.hsl.s + '%,' + CKolorFactory.hsl.l + '%)'}\"></span></div></div><div class=c-ckolor__input-row><div class=c-ckolor__saturation ng-style=\"{background: 'linear-gradient(to right, hsl(' + CKolorFactory.hsl.h + ',0%,' + CKolorFactory.hsl.l + '%), hsl(' + CKolorFactory.hsl.h + ',100%,' + CKolorFactory.hsl.l + '%) 100%)'}\"><div class=c-ckolor__saturation-handle style=\"left: {{CKolorFactory.hsl.s}}%\"></div></div></div><div class=\"c-ckolor__input-row c-ckolor__alpha-wrapper\"><div class=c-ckolor__alpha ng-style=\"{background: 'linear-gradient(to right, rgba(' + CKolorFactory.rgb.r + ',' + CKolorFactory.rgb.g + ',' + CKolorFactory.rgb.b + ', 0), rgba(' + CKolorFactory.rgb.r + ',' + CKolorFactory.rgb.g + ',' + CKolorFactory.rgb.b + ', 1) 100%)'}\"><div class=c-ckolor__alpha-handle style=\"left: {{CKolorFactory.alpha}}%\"></div></div></div><div class=\"c-ckolor__input-row center\"><div class=c-ckolor__swatch><span ng-style=\"{background: 'hsla(' + CKolorFactory.hsl.h + ',' + CKolorFactory.hsl.s + '%,' + CKolorFactory.hsl.l + '%,' + CKolorFactory.alpha / 100 + ')'}\"></span></div><div class=\"c-ckolor__input-wrapper dropdown\"><div ng-bind=CKolorFactory.display></div><ul><li ng-click=\"CKolorFactory.updateColorDisplay('hex')\">Hex</li><li ng-click=\"CKolorFactory.updateColorDisplay('rgb')\">RGB</li><li ng-click=\"CKolorFactory.updateColorDisplay('hsl')\">HSL</li></ul></div><div ng-if=\"CKolorFactory.display === 'hsl'\" class=c-ckolor__overlay-inputs><div class=c-ckolor__input-wrapper ng-class=\"CKolorFactory.alpha === 100 ? '' : 'smaller'\"><input type=number ng-model=CKolorFactory.inputHsl.h min=0 max=360></div><div class=c-ckolor__input-wrapper ng-class=\"CKolorFactory.alpha === 100 ? '' : 'smaller'\"><input type=number ng-model=CKolorFactory.inputHsl.s min=0 max=100></div><div class=c-ckolor__input-wrapper ng-class=\"CKolorFactory.alpha === 100 ? '' : 'smaller'\"><input type=number ng-model=CKolorFactory.inputHsl.l min=0 max=100></div><div class=\"c-ckolor__input-wrapper smaller\" ng-if=\"CKolorFactory.alpha !== 100\"><input type=number ng-model=CKolorFactory.alpha min=0 max=100></div></div><div ng-if=\"CKolorFactory.display === 'rgb'\" class=c-ckolor__overlay-inputs><div class=c-ckolor__input-wrapper ng-class=\"CKolorFactory.alpha === 100 ? '' : 'smaller'\"><input type=number ng-model=CKolorFactory.rgb.r ng-change=CKolorFactory.updateRGB() min=0 max=255></div><div class=c-ckolor__input-wrapper ng-class=\"CKolorFactory.alpha === 100 ? '' : 'smaller'\"><input type=number ng-model=CKolorFactory.rgb.g ng-change=CKolorFactory.updateRGB() min=0 max=255></div><div class=c-ckolor__input-wrapper ng-class=\"CKolorFactory.alpha === 100 ? '' : 'smaller'\"><input type=number ng-model=CKolorFactory.rgb.b ng-change=CKolorFactory.updateRGB() min=0 max=255></div><div class=\"c-ckolor__input-wrapper smaller\" ng-if=\"CKolorFactory.alpha !== 100\"><input type=number ng-model=CKolorFactory.alpha min=0 max=100></div></div><div ng-if=\"CKolorFactory.display === 'hex'\" class=c-ckolor__overlay-inputs><div class=\"c-ckolor__input-wrapper hex\"><input type=text ng-model=CKolorFactory.hex a-ckolor-hex-input ng-change=CKolorFactory.updateHEX()></div></div><div class=\"c-ckolor__input-wrapper button\"><button class=c-ckolor__save-btn ng-click=CKolorFactory.save()><i class=\"fa fa-check\"></i></button></div><div class=\"c-ckolor__input-wrapper button\"><button class=c-ckolor__close-btn ng-click=CKolorFactory.toggleCKoloring()><i class=\"fa fa-times\"></i></button></div></div><div class=c-ckolor_previous-color-container ng-if=CKolorFactory.previousColors.length><div ng-repeat=\"previous in CKolorFactory.previousColors track by $index\" class=c-ckolor_previous-swatch ng-style={background:previous} ng-click=CKolorFactory.previousColorClick(previous)></div></div></div></div></div>",link:function(e,a){e.CKolorFactory=r;var t=l[0].body,n=a[0].querySelector(".c-ckolor__wheel-value"),i=(a[0].querySelector(".c-ckolor__wheel-scoop"),a[0].querySelector(".c-ckolor__close-btn"),a[0].querySelector(".c-ckolor__save-btn"),a[0].querySelector(".c-ckolor__saturation")),s=(a[0].querySelector(".c-ckolor__saturation-handle"),a[0].querySelector(".c-ckolor__alpha")),c=(a[0].querySelector(".c-ckolor__alpha-handle"),a[0].querySelector(".c-ckolor__overlay-inner"),null),u=null,d=null,h=function(l){n||(n=a[0].querySelector(".c-ckolor__wheel-value")),n&&o(function(){r.hueLightFromRadial(l,n)})};e.updateHueLightFromRadial=function(o){h(o)};var p=function(l){var e=l.pageX-u.left,a=Math.round(e/u.width*100);a<0?a=0:a>100&&(a=100),r.hsl.s=a,o(function(){r.updateHSL()})},g=function(l){var e=l.pageX-d.left,a=Math.round(e/d.width*100);a<0?a=0:a>100&&(a=100),r.alpha=a,o(function(){r.updateHSL()})},v=function(o){t.removeEventListener("mousemove",h,!0),t.removeEventListener("mousemove",p,!0),t.removeEventListener("mousemove",g,!0)},m=function(o){c=n.getBoundingClientRect(),h(o),t.addEventListener("mousemove",h,!0)},y=function(o){u=i.getBoundingClientRect(),p(o),t.addEventListener("mousemove",p,!0)},b=function(o){d=s.getBoundingClientRect(),g(o),t.addEventListener("mousemove",g,!0)};n.addEventListener("mousedown",m,!0),i.addEventListener("mousedown",y,!0),s.addEventListener("mousedown",b,!0),t.addEventListener("mouseup",v,!0),e.$watchCollection(function(){return r.hls},function(o,l){o!==l&&!isNaN(o.h)&&!isNaN(o.l)&&!isNaN(o.s)&&o.h>=0&&o.h<=360&&o.l>=0&&o.l<=255&&o.s>=0&&o.s<=255&&r.updateHSL()})}}}])}(angular.module("aCKolor"));
//# sourceMappingURL=aCKolor.min.js.map
